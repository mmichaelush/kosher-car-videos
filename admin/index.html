<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ניהול תוכן - CAR-טיב</title>
  <link rel="icon" href="../data/assets/images/favicon.ico" type="image/x-icon">
  
  <!-- Global styles for the admin interface -->
  <link rel="stylesheet" href="admin-styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Authentication -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
  <!-- Decap CMS application script -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

  <!-- Configuration for Decap CMS, loaded via a script tag -->
  <script type="text/yaml">
    backend:
      name: git-gateway
      repo: mmichaelush/kosher-car-videos
      branch: main

    publish_mode: editorial_workflow
    media_folder: "data/assets/images"
    public_folder: "/data/assets/images"

    collections:
      - name: "videos_collection"
        label: "מאגר סרטונים"
        files:
          - name: "videos"
            label: "כל הסרטונים"
            file: "data/videos.json"
            description: "ניהול כל הסרטונים באתר. כל שינוי כאן מתעדכן בקובץ הראשי."
            fields:
              - name: videos
                label: "רשימת סרטונים"
                label_singular: "סרטון"
                widget: list
                add_to_top: true
                summary: "{{fields.title}} (ID: {{fields.id}})"
                fields:
                  - { label: "מזהה הסרטון ביוטיוב", name: "id", widget: "string", hint: "ה-ID של הסרטון מתוך הקישור ביוטיוב (11 תווים). לדוגמה: -AtUg2GPXKs", pattern: ['^[\\w-]{11}$', "חייב להיות מזהה יוטיוב תקין בן 11 תווים"] }
                  - { label: "כותרת הסרטון", name: "title", widget: "string" }
                  - { label: "אורך הסרטון", name: "duration", widget: "string", hint: "בפורמט HH:MM:SS או MM:SS" }
                  - { label: "שם הערוץ", name: "channel", widget: "string" }
                  - { label: "תמונת הערוץ", name: "channelImage", widget: "image", required: false }
                  - { label: "תמונה ממוזערת (Thumbnail)", name: "thumbnail", widget: "string", hint: "הכנס את ה-ID של הסרטון בסוף הכתובת: https://i.ytimg.com/vi/VIDEO_ID/hqdefault.jpg", required: false }
                  - label: "קטגוריה"
                    name: "category"
                    widget: "select"
                    options:
                      - { label: "סקירות רכב", value: "review" }
                      - { label: "טיפולים", value: "maintenance" }
                      - { label: "עשה זאת בעצמך", value: "diy" }
                      - { label: "איתור ותיקון תקלות", value: "troubleshooting" }
                      - { label: "שיפורים ושדרוגים", value: "upgrades" }
                      - { label: "מערכות הרכב", value: "systems" }
                      - { label: "רכבי אספנות", value: "collectors" }
                  - { label: "תגיות", name: "tags", widget: "list", hint: "הוסף תגיות רלוונטיות. לחץ 'הוסף' כדי להוסיף תגית חדשה." }
                  - { label: "תוכן בעברית?", name: "hebrewContent", widget: "boolean", default: true }
                  - { label: "תאריך הוספה", name: "dateAdded", widget: "datetime", format: "YYYY-MM-DD", date_format: "DD.MM.YYYY", time_format: false, required: false }
  </script>

  <script>
    // Initialize Netlify Identity
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
  
</body>
</html>
